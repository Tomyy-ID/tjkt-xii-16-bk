<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel | XII-16 TJKT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #0f172a; color: white; font-family: 'Inter', sans-serif; }
        .admin-card { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); }
    </style>
</head>
<body class="p-8">
    <h1 class="text-3xl font-black uppercase text-blue-500 mb-8">Daftar File Terupload</h1>
    <div id="admin-list" class="grid grid-cols-2 md:grid-cols-4 gap-6">
        <p>Memuat file dari GitHub...</p>
    </div>

    <script>
        const GITHUB_TOKEN = "PASTE_TOKEN_ANDA_DI_SINI";
        const USERNAME = "USERNAME_GITHUB_ANDA";
        const REPO_NAME = "NAMA_REPO_ANDA";
        const FOLDER_NAME = "kontribusi-siswa";

        async function loadAdminFiles() {
            const url = `https://api.github.com/repos/${USERNAME}/${REPO_NAME}/contents/${FOLDER_NAME}`;
            const container = document.getElementById('admin-list');

            try {
                const response = await fetch(url, {
                    headers: { 'Authorization': `token ${GITHUB_TOKEN}` }
                });
                const files = await response.json();

                container.innerHTML = files.map(file => `
                    <div class="admin-card p-4 rounded-xl">
                        <img src="${file.download_url}" class="w-full h-32 object-cover rounded-lg mb-4">
                        <p class="text-[10px] truncate mb-2">${file.name}</p>
                        <button onclick="deleteFile('${file.path}', '${file.sha}')" class="w-full bg-red-600 text-xs py-1 rounded font-bold">HAPUS</button>
                    </div>
                `).join('');
            } catch (e) { container.innerHTML = "Gagal memuat file."; }
        }

        async function deleteFile(path, sha) {
            if(!confirm("Hapus file ini?")) return;
            const url = `https://api.github.com/repos/${USERNAME}/${REPO_NAME}/contents/${path}`;
            await fetch(url, {
                method: 'DELETE',
                headers: { 'Authorization': `token ${GITHUB_TOKEN}`, 'Content-Type': 'application/json' },
                body: JSON.stringify({ message: "Hapus foto", sha: sha })
            });
            location.reload();
        }
        loadAdminFiles();
    </script>
</body>
</html>
